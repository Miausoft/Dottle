@model PostViewModel  

<div class="card post-entry">
    <div class="card-body">
        <h5 class="card-title">@Model.Title</h5>
        <p class="card-title">@Model.Description</p>
        <div class="rating-carts" id='div_<%#Container.DataItemIndex %>' value="false">
            <input type="hidden" id="postId" value="@Model.Id" />
            <input type="hidden" id="userId" value="@Model.UserId" />
            @for (int i = 1; i <= 5; ++i)
            {
                <a class="cart-outline @(Model.Rate > i-1 ? "filled" : "")" title="vote @i" onclick="saveVotes(@i)">vote @i</a>
            }
            <p>Rating : <span id="postRate" class="total-rating">@Model.Rate</span></p>
        </div>
        <a asp-controller="Posts" asp-action="Show" asp-route-id="@Model.Id" class="button normal" style="vertical-align: middle"><span>Visit </span></a>
    </div>
</div>

<script>
   function saveVotes(rate) {
        console.log('/Rate/Create/' + $("#userId").val() + '/' + $("#postId").val() + '/' + rate);
        $.ajax({
            url: '/Rate/Create/' + $("#userId").val() + '/' + $("#postId").val() + '/' + rate,
            type: 'POST',
            contentType: "application/json",
            success: function () {
                getRates().then(function (result) {
                    $("#postRate").text(result).removeAttr("style");
                    console.log(result);
                })
            },
            error: function (result) {
                console.log(result);
            }
        });
    }

    function getRates() {
        return Promise.resolve($.ajax({
            url: 'Rate/' + $("#postId").val(),
            method: 'GET',
            contentType: "application/json"
        }));
    }
 </script>